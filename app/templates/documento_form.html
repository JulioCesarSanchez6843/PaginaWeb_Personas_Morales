{% extends 'layout.html' %}

{% block content %}
<div class="container mt-4">
    <h2>{{ 'Editar Documento' if documento else 'Subir Documento' }}</h2>

    <form method="POST" enctype="multipart/form-data">
        <!-- Persona Moral -->
        <div class="mb-3">
            <label for="id_moral" class="form-label">Persona Moral</label>
            <select name="id_moral" id="id_moral" class="form-select" required>
                <option value="">-- Seleccione --</option>
                {% for id_moral, razon_social in personas_morales %}
                    <option value="{{ id_moral }}"
                        {% if documento and documento.id_moral == id_moral %}selected{% endif %}>
                        {{ razon_social }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Archivo (solo si es nuevo) -->
        {% if not documento %}
        <div class="mb-3">
            <label for="archivo" class="form-label">Archivo</label>
            <input type="file" name="archivo" id="archivo" class="form-control" required>
        </div>
        {% else %}
        <p><strong>Archivo actual:</strong> {{ documento.nombre_archivo }}</p>
        {% endif %}

        <!-- Tipo de documento -->
        <div class="mb-3">
            <label for="tipo_documento" class="form-label">Tipo de Documento</label>
            <input type="text" name="tipo_documento" id="tipo_documento" class="form-control"
                   value="{{ documento.tipo_documento if documento else '' }}">
        </div>

        <!-- Botones -->
        <button type="submit" class="btn btn-primary">
            {{ 'Actualizar' if documento else 'Subir' }}
        </button>
        <a href="{{ url_for('documentos_view.listar_documentos') }}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
